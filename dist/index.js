"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("dayjs"),a=require("react/jsx-runtime");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t);!function(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===a&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".table-container{font-family:inherit}.table{padding:20px 0;width:100%}.table-header{background-color:var(--bright)}.table-header-cell{color:var(--text);padding:10px}.table-row:nth-child(2n){background-color:var(--light)}.table-row-cell{padding:10px}.table-header-sort{align-items:center;background:none;border:none;color:var(--text);cursor:pointer;display:flex;justify-content:center;padding:0;width:100%}.table-header-sort-icon-box{margin-left:10px;position:relative}.table-header-sort-icon:first-of-type{position:absolute}.table-header-sort-icon-hidden{opacity:0}.table-container-header{align-items:center;display:flex;justify-content:space-between}.table-container-header-select{margin:0 10px}.table-container-header-search-input,.table-container-header-select{border:1px solid var(--bright);font-family:inherit;font-size:inherit;padding:3px}.table-container-header-search-input{margin-left:10px}.table-footer,.table-footer-nav{align-items:center;display:flex;justify-content:space-between}.table-footer-counter{margin:0}.table-footer-nav-counter{margin:0 10px}.table-footer-nav-button{background:var(--bright);border:2px solid var(--bright);border-radius:5px;box-shadow:none;color:var(--text);cursor:pointer;font-family:inherit;font-size:16px;padding:10px;transition:all .4s ease}.table-footer-nav-button:focus,.table-footer-nav-button:hover{background:#fff;color:var(--bright)}.table-error{padding:20px;text-align:center;width:100%}"),exports.Table=function({content:t,color:r,dateFormat:n,objectKey:l}){const[s,c]=e.useState(null),[i,d]=e.useState(null),[h,b]=e.useState(null),[f,u]=e.useState([]),[p,g]=e.useState({}),[x,m]=e.useState(10),[y,j]=e.useState(0),[v,w]=e.useState({"--bright":"rgba(139, 134, 128, 1)","--light":"rgba(139, 134, 128, 0.2)","--text":"white"});e.useEffect((()=>{(e=>{const t=[],a=[],r={};e.forEach((e=>{for(let a in e)t.includes(a)||t.push(a)})),t.forEach((e=>{let t=e;for(const a of e)a===a.toUpperCase()&&(t=e.replace(a,` ${a.toLowerCase()}`));t=t.replace(t[0],t[0].toUpperCase()),a.push({category:e,formattedCategory:t}),r[e]="none"})),u(a),g(r)})(t),(e=>{let t=[];e.forEach((e=>{const a={};for(const t in e)if(l.hasOwnProperty(t)){const r=l[t];a[t]=e[t][r]}else a[t]=e[t];t.push(a)})),c(t)})(t)}),[t,l]),e.useEffect((()=>{d(s)}),[s]),e.useEffect((()=>{/^#[0-9a-zA-Z]{3}(?:[0-9a-zA-Z]{3})?$/.test(r)&&(e=>{let t,a=e;if(4===a.length)for(const e of a)"#"!==e&&(a=a.replace(e,`${e}${e}`));const r=parseInt(a.slice(1,3),16),o=parseInt(a.slice(3,5),16),n=parseInt(a.slice(5,7),16);t=(.2126*r+.7152*o+.0722*n)/255>.5?"black":"white",w({"--bright":`rgba(${r}, ${o}, ${n}, 1)`,"--light":`rgba(${r}, ${o}, ${n}, 0.2)`,"--text":t})})(r)}),[r]);const N=(e,t,a)=>[...e].sort(((e,r)=>("none"===p[t]||"descending"===p[t])&&a||"ascending"===p[t]&&!a?e[t].toLowerCase().localeCompare(r[t].toLowerCase()):r[t].toLowerCase().localeCompare(e[t].toLowerCase())));e.useEffect((()=>{i&&(j(0),(e=>{let t=[...e],a=[];for(;t.length>0;)a.push(t.slice(0,x)),t=t.slice(x-1,-1);b(a)})(i))}),[x,i]);const C=(e,t)=>{if(e.hasOwnProperty(t.category))return o.default(e[t.category]).isValid()&&e[t.category]===o.default(e[t.category]).toISOString()?n?o.default(e[t.category]).format(n):o.default(e[t.category]).format("DD/MM/YYYY"):e[t.category]};return a.jsxs("div",{className:"table-container",style:v,children:[a.jsxs("header",{className:"table-container-header",children:[a.jsxs("label",{htmlFor:"tableSeparate",children:["Show",a.jsxs("select",{id:"tableSeparate",name:"tableSeparate",className:"table-container-header-select",value:x,onChange:e=>m(e.target.value),children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]}),"entries"]}),a.jsxs("form",{className:"table-container-header-search",children:[a.jsx("label",{htmlFor:"tableSearch",children:"Search: "}),a.jsx("input",{id:"tableSearch",name:"tableSearch",className:"table-container-header-search-input",onChange:e=>{d(((e,t)=>{const a=t.filter((t=>{let a=Object.values(t);return a=a.map((t=>t.toLowerCase().includes(e.toLowerCase()))),a.includes(!0)}));for(const e in p)if("none"!==p[e])return N(a,e,!1);return a})(e.target.value,s))}})]})]}),a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsx("tr",{className:"table-header",children:f.map((e=>a.jsx("th",{className:"table-header-cell",children:a.jsxs("button",{className:"table-header-sort",onClick:()=>{d(N(i,e.category,!0)),(e=>{const t={...p};for(let e in t)t[e]="none";"none"===p[e]||"descending"===p[e]?t[e]="ascending":t[e]="descending",g(t)})(e.category)},children:[a.jsx("h2",{children:e.formattedCategory}),a.jsxs("div",{className:"table-header-sort-icon-box",children:[a.jsx("i",{className:"descending"!==p[e.category]?"table-header-sort-icon fa-solid fa-sort-up":"table-header-sort-icon fa-solid fa-sort-up  table-header-sort-icon-hidden"}),a.jsx("i",{className:"ascending"!==p[e.category]?"table-header-sort-icon fa-solid fa-sort-down":"table-header-sort-icon fa-solid fa-sort-down  table-header-sort-icon-hidden"})]})]})},e.category)))})}),a.jsx("tbody",{children:h&&h.length>0?h[y].map((e=>a.jsx("tr",{className:"table-row",children:f.map((t=>a.jsx("td",{className:"table-row-cell",children:C(e,t)},t.category)))},h[y].indexOf(e)))):a.jsx("tr",{children:a.jsx("td",{className:"table-error",colSpan:f.length,children:"No result matches your search!"})})})]}),a.jsxs("footer",{className:"table-footer",children:[h&&h.length>0&&a.jsxs("p",{className:"table-footer-counter",children:["Showing ",i.indexOf(h[y][0])+1," to ",-1===i.indexOf(h[y][x-1])?i.length:i.indexOf(h[y][x-1])+1," of ",i.length," entries"]}),h&&h.length>0&&a.jsxs("nav",{className:"table-footer-nav",children:[0!==y&&a.jsx("button",{onClick:()=>j(y-1),className:"table-footer-nav-button",children:"Previous"}),a.jsxs("p",{className:"table-footer-nav-counter",children:["Page ",y+1]}),h&&y!==h.length-1&&a.jsx("button",{onClick:()=>j(y+1),className:"table-footer-nav-button",children:"Next"})]})]})]})};
