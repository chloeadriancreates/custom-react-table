import{useState as e,useEffect as t}from"react";import a from"dayjs";import{jsxs as r,jsx as o}from"react/jsx-runtime";function n({content:n,color:l,dateFormat:i,objectKey:c}){const[s,d]=e(null),[h,b]=e(null),[f,p]=e(null),[g,u]=e([]),[m,y]=e({}),[x,v]=e(10),[w,N]=e(0),[C,S]=e({"--bright":"rgba(139, 134, 128, 1)","--light":"rgba(139, 134, 128, 0.2)","--text":"white"});t((()=>{(e=>{const t=[],a=[],r={};e.forEach((e=>{for(let a in e)t.includes(a)||t.push(a)})),t.forEach((e=>{let t=e;for(const a of e)a===a.toUpperCase()&&(t=e.replace(a,` ${a.toLowerCase()}`));t=t.replace(t[0],t[0].toUpperCase()),a.push({category:e,formattedCategory:t}),r[e]="none"})),u(a),y(r)})(n),(e=>{let t=[];e.forEach((e=>{const a={};for(const t in e)if(c.hasOwnProperty(t)){const r=c[t];a[t]=e[t][r]}else a[t]=e[t];t.push(a)})),d(t)})(n)}),[n,c]),t((()=>{b(s)}),[s]);t((()=>{/^#[0-9a-zA-Z]{3}(?:[0-9a-zA-Z]{3})?$/.test(l)&&(e=>{let t,a=e;if(4===a.length)for(const e of a)"#"!==e&&(a=a.replace(e,`${e}${e}`));const r=parseInt(a.slice(1,3),16),o=parseInt(a.slice(3,5),16),n=parseInt(a.slice(5,7),16);t=(.2126*r+.7152*o+.0722*n)/255>.5?"black":"white",S({"--bright":`rgba(${r}, ${o}, ${n}, 1)`,"--light":`rgba(${r}, ${o}, ${n}, 0.2)`,"--text":t})})(l)}),[l]);const $=(e,t,a)=>[...e].sort(((e,r)=>("none"===m[t]||"descending"===m[t])&&a||"ascending"===m[t]&&!a?e[t].toLowerCase().localeCompare(r[t].toLowerCase()):r[t].toLowerCase().localeCompare(e[t].toLowerCase())));t((()=>{h&&(N(0),(e=>{let t=[...e],a=[];for(;t.length>0;)a.push(t.slice(0,x)),t=t.slice(x-1,-1);p(a)})(h))}),[x,h]);const k=(e,t)=>{if(e.hasOwnProperty(t.category))return a(e[t.category]).isValid()&&e[t.category]===a(e[t.category]).toISOString()?i?a(e[t.category]).format(i):a(e[t.category]).format("DD/MM/YYYY"):e[t.category]};return r("div",{className:"table-container",style:C,children:[r("header",{className:"table-container-header",children:[r("label",{htmlFor:"tableSeparate",children:["Show",r("select",{id:"tableSeparate",name:"tableSeparate",className:"table-container-header-select",value:x,onChange:e=>v(e.target.value),children:[o("option",{value:10,children:"10"}),o("option",{value:25,children:"25"}),o("option",{value:50,children:"50"}),o("option",{value:100,children:"100"})]}),"entries"]}),r("form",{className:"table-container-header-search",children:[o("label",{htmlFor:"tableSearch",children:"Search: "}),o("input",{id:"tableSearch",name:"tableSearch",className:"table-container-header-search-input",onChange:e=>{b(((e,t)=>{const a=t.filter((t=>{let a=Object.values(t);return a=a.map((t=>t.toLowerCase().includes(e.toLowerCase()))),a.includes(!0)}));for(const e in m)if("none"!==m[e])return $(a,e,!1);return a})(e.target.value,s))}})]})]}),r("table",{className:"table",children:[o("thead",{children:o("tr",{className:"table-header",children:g.map((e=>o("th",{className:"table-header-cell",children:r("button",{className:"table-header-sort",onClick:()=>{b($(h,e.category,!0)),(e=>{const t={...m};for(let e in t)t[e]="none";"none"===m[e]||"descending"===m[e]?t[e]="ascending":t[e]="descending",y(t)})(e.category)},children:[o("h2",{children:e.formattedCategory}),r("div",{className:"table-header-sort-icon-box",children:[o("i",{className:"descending"!==m[e.category]?"table-header-sort-icon fa-solid fa-sort-up":"table-header-sort-icon fa-solid fa-sort-up  table-header-sort-icon-hidden"}),o("i",{className:"ascending"!==m[e.category]?"table-header-sort-icon fa-solid fa-sort-down":"table-header-sort-icon fa-solid fa-sort-down  table-header-sort-icon-hidden"})]})]})},e.category)))})}),o("tbody",{children:f&&f.length>0?f[w].map((e=>o("tr",{className:"table-row",children:g.map((t=>o("td",{className:"table-row-cell",children:k(e,t)},t.category)))},f[w].indexOf(e)))):o("tr",{children:o("td",{className:"table-error",colSpan:g.length,children:"No result matches your search!"})})})]}),r("footer",{className:"table-footer",children:[f&&f.length>0&&r("p",{className:"table-footer-counter",children:["Showing ",h.indexOf(f[w][0])+1," to ",-1===h.indexOf(f[w][x-1])?h.length:h.indexOf(f[w][x-1])+1," of ",h.length," entries"]}),f&&f.length>0&&r("nav",{className:"table-footer-nav",children:[0!==w&&o("button",{onClick:()=>N(w-1),className:"table-footer-nav-button",children:"Previous"}),r("p",{className:"table-footer-nav-counter",children:["Page ",w+1]}),f&&w!==f.length-1&&o("button",{onClick:()=>N(w+1),className:"table-footer-nav-button",children:"Next"})]})]})]})}!function(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===a&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".table-container{font-family:inherit}.table{padding:20px 0;width:100%}.table-header{background-color:var(--bright)}.table-header-cell{color:var(--text);padding:10px}.table-row:nth-child(2n){background-color:var(--light)}.table-row-cell{padding:10px}.table-header-sort{align-items:center;background:none;border:none;color:var(--text);cursor:pointer;display:flex;justify-content:center;padding:0;width:100%}.table-header-sort-icon-box{margin-left:10px;position:relative}.table-header-sort-icon:first-of-type{position:absolute}.table-header-sort-icon-hidden{opacity:0}.table-container-header{align-items:center;display:flex;justify-content:space-between}.table-container-header-select{margin:0 10px}.table-container-header-search-input,.table-container-header-select{border:1px solid var(--bright);font-family:inherit;font-size:inherit;padding:3px}.table-container-header-search-input{margin-left:10px}.table-footer,.table-footer-nav{align-items:center;display:flex;justify-content:space-between}.table-footer-counter{margin:0}.table-footer-nav-counter{margin:0 10px}.table-footer-nav-button{background:var(--bright);border:2px solid var(--bright);border-radius:5px;box-shadow:none;color:var(--text);cursor:pointer;font-family:inherit;font-size:16px;padding:10px;transition:all .4s ease}.table-footer-nav-button:focus,.table-footer-nav-button:hover{background:#fff;color:var(--bright)}.table-error{padding:20px;text-align:center;width:100%}");export{n as Table};
